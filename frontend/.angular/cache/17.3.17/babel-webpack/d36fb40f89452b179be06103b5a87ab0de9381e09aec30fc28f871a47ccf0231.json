{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nlet FriendsComponent = class FriendsComponent {\n  constructor(friendshipService, authService, router) {\n    this.friendshipService = friendshipService;\n    this.authService = authService;\n    this.router = router;\n    this.friends = [];\n    this.pendingRequests = [];\n    this.searchUsername = '';\n    this.searchResult = null;\n    this.searchError = '';\n    this.loading = false;\n    this.currentUsername = '';\n  }\n  ngOnInit() {\n    this.currentUsername = this.authService.getUsername();\n    this.loadFriends();\n    this.loadPendingRequests();\n  }\n  loadFriends() {\n    this.loading = true;\n    this.friendshipService.getFriends().subscribe({\n      next: friends => {\n        this.friends = friends;\n        this.loading = false;\n      },\n      error: error => {\n        console.error('Error loading friends:', error);\n        this.loading = false;\n      }\n    });\n  }\n  loadPendingRequests() {\n    this.friendshipService.getPendingRequests().subscribe({\n      next: requests => {\n        this.pendingRequests = requests;\n      },\n      error: error => {\n        console.error('Error loading pending requests:', error);\n      }\n    });\n  }\n  searchUser() {\n    if (!this.searchUsername.trim()) {\n      this.searchError = 'Please enter a username';\n      return;\n    }\n    this.searchError = '';\n    this.searchResult = null;\n    this.loading = true;\n    this.friendshipService.searchUserByUsername(this.searchUsername).subscribe({\n      next: user => {\n        this.searchResult = user;\n        this.loading = false;\n      },\n      error: error => {\n        this.searchError = error.status === 404 ? 'User not found' : 'Error searching for user';\n        this.loading = false;\n      }\n    });\n  }\n  sendFriendRequest(username) {\n    this.friendshipService.sendFriendRequest({\n      username\n    }).subscribe({\n      next: () => {\n        this.searchResult = null;\n        this.searchUsername = '';\n        alert('Friend request sent successfully!');\n        this.loadPendingRequests();\n      },\n      error: error => {\n        const message = error.error?.message || 'Error sending friend request';\n        alert(message);\n      }\n    });\n  }\n  acceptRequest(friendshipId) {\n    this.friendshipService.acceptFriendRequest(friendshipId).subscribe({\n      next: () => {\n        this.loadFriends();\n        this.loadPendingRequests();\n      },\n      error: error => {\n        console.error('Error accepting request:', error);\n        alert('Error accepting friend request');\n      }\n    });\n  }\n  rejectRequest(friendshipId) {\n    this.friendshipService.rejectFriendRequest(friendshipId).subscribe({\n      next: () => {\n        this.loadPendingRequests();\n      },\n      error: error => {\n        console.error('Error rejecting request:', error);\n        alert('Error rejecting friend request');\n      }\n    });\n  }\n  openChat(friendId) {\n    this.router.navigate(['/chat', friendId]);\n  }\n  logout() {\n    this.authService.logout();\n  }\n};\nFriendsComponent = __decorate([Component({\n  selector: 'app-friends',\n  standalone: true,\n  imports: [CommonModule, FormsModule],\n  templateUrl: './friends.component.html',\n  styleUrls: ['./friends.component.css']\n})], FriendsComponent);\nexport { FriendsComponent };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}