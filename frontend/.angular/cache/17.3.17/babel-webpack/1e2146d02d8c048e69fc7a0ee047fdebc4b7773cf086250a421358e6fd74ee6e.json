{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nlet FriendsComponent = class FriendsComponent {\n  constructor(friendshipService, authService, router) {\n    this.friendshipService = friendshipService;\n    this.authService = authService;\n    this.router = router;\n    this.friends = [];\n    this.pendingRequests = [];\n    this.searchUsername = '';\n    this.searchResult = null;\n    this.searchError = '';\n    this.loading = false;\n    this.currentUsername = '';\n  }\n  ngOnInit() {\n    this.currentUsername = this.authService.getUsername();\n    this.loadFriends();\n    this.loadPendingRequests();\n  }\n  loadFriends() {\n    this.loading = true;\n    this.friendshipService.getFriends().subscribe({\n      next: friends => {\n        this.friends = friends;\n        this.loading = false;\n      },\n      error: error => {\n        console.error('Error loading friends:', error);\n        this.loading = false;\n      }\n    });\n  }\n  loadPendingRequests() {\n    this.friendshipService.getPendingRequests().subscribe({\n      next: requests => {\n        this.pendingRequests = requests;\n      },\n      error: error => {\n        console.error('Error loading pending requests:', error);\n      }\n    });\n  }\n  searchUser() {\n    if (!this.searchUsername.trim()) {\n      this.searchError = 'Please enter a username';\n      return;\n    }\n    this.searchError = '';\n    this.searchResult = null;\n    this.loading = true;\n    this.friendshipService.searchUserByUsername(this.searchUsername).subscribe({\n      next: user => {\n        this.searchResult = user;\n        this.loading = false;\n      },\n      error: error => {\n        this.searchError = error.status === 404 ? 'User not found' : 'Error searching for user';\n        this.loading = false;\n      }\n    });\n  }\n  sendFriendRequest(username) {\n    this.friendshipService.sendFriendRequest({\n      username\n    }).subscribe({\n      next: () => {\n        this.searchResult = null;\n        this.searchUsername = '';\n        alert('Friend request sent successfully!');\n        this.loadPendingRequests();\n      },\n      error: error => {\n        const message = error.error?.message || 'Error sending friend request';\n        alert(message);\n      }\n    });\n  }\n  acceptRequest(friendshipId) {\n    this.friendshipService.acceptFriendRequest(friendshipId).subscribe({\n      next: () => {\n        this.loadFriends();\n        this.loadPendingRequests();\n      },\n      error: error => {\n        console.error('Error accepting request:', error);\n        alert('Error accepting friend request');\n      }\n    });\n  }\n  rejectRequest(friendshipId) {\n    this.friendshipService.rejectFriendRequest(friendshipId).subscribe({\n      next: () => {\n        this.loadPendingRequests();\n      },\n      error: error => {\n        console.error('Error rejecting request:', error);\n        alert('Error rejecting friend request');\n      }\n    });\n  }\n  openChat(friendId) {\n    this.router.navigate(['/chat', friendId]);\n  }\n  logout() {\n    this.authService.logout();\n  }\n};\nFriendsComponent = __decorate([Component({\n  selector: 'app-friends',\n  standalone: true,\n  imports: [CommonModule, FormsModule],\n  templateUrl: './friends.component.html',\n  styleUrls: ['./friends.component.css']\n})], FriendsComponent);\nexport { FriendsComponent };","map":{"version":3,"names":["Component","CommonModule","FormsModule","FriendsComponent","constructor","friendshipService","authService","router","friends","pendingRequests","searchUsername","searchResult","searchError","loading","currentUsername","ngOnInit","getUsername","loadFriends","loadPendingRequests","getFriends","subscribe","next","error","console","getPendingRequests","requests","searchUser","trim","searchUserByUsername","user","status","sendFriendRequest","username","alert","message","acceptRequest","friendshipId","acceptFriendRequest","rejectRequest","rejectFriendRequest","openChat","friendId","navigate","logout","__decorate","selector","standalone","imports","templateUrl","styleUrls"],"sources":["/home/joao/Projects/payment-live-chat/frontend/src/app/components/friends/friends.component.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Router } from '@angular/router';\nimport { AuthService } from '../../services/auth.service';\nimport { FriendshipService } from '../../services/friendship.service';\nimport { User } from '../../models/user.model';\nimport { Friendship } from '../../models/friendship.model';\n\n@Component({\n  selector: 'app-friends',\n  standalone: true,\n  imports: [CommonModule, FormsModule],\n  templateUrl: './friends.component.html',\n  styleUrls: ['./friends.component.css']\n})\nexport class FriendsComponent implements OnInit {\n  friends: User[] = [];\n  pendingRequests: Friendship[] = [];\n  searchUsername: string = '';\n  searchResult: User | null = null;\n  searchError: string = '';\n  loading: boolean = false;\n  currentUsername: string = '';\n\n  constructor(\n    private friendshipService: FriendshipService,\n    private authService: AuthService,\n    private router: Router\n  ) {}\n\n  ngOnInit(): void {\n    this.currentUsername = this.authService.getUsername();\n    this.loadFriends();\n    this.loadPendingRequests();\n  }\n\n  loadFriends(): void {\n    this.loading = true;\n    this.friendshipService.getFriends().subscribe({\n      next: (friends) => {\n        this.friends = friends;\n        this.loading = false;\n      },\n      error: (error) => {\n        console.error('Error loading friends:', error);\n        this.loading = false;\n      }\n    });\n  }\n\n  loadPendingRequests(): void {\n    this.friendshipService.getPendingRequests().subscribe({\n      next: (requests) => {\n        this.pendingRequests = requests;\n      },\n      error: (error) => {\n        console.error('Error loading pending requests:', error);\n      }\n    });\n  }\n\n  searchUser(): void {\n    if (!this.searchUsername.trim()) {\n      this.searchError = 'Please enter a username';\n      return;\n    }\n\n    this.searchError = '';\n    this.searchResult = null;\n    this.loading = true;\n\n    this.friendshipService.searchUserByUsername(this.searchUsername).subscribe({\n      next: (user) => {\n        this.searchResult = user;\n        this.loading = false;\n      },\n      error: (error) => {\n        this.searchError = error.status === 404\n          ? 'User not found'\n          : 'Error searching for user';\n        this.loading = false;\n      }\n    });\n  }\n\n  sendFriendRequest(username: string): void {\n    this.friendshipService.sendFriendRequest({ username }).subscribe({\n      next: () => {\n        this.searchResult = null;\n        this.searchUsername = '';\n        alert('Friend request sent successfully!');\n        this.loadPendingRequests();\n      },\n      error: (error) => {\n        const message = error.error?.message || 'Error sending friend request';\n        alert(message);\n      }\n    });\n  }\n\n  acceptRequest(friendshipId: number): void {\n    this.friendshipService.acceptFriendRequest(friendshipId).subscribe({\n      next: () => {\n        this.loadFriends();\n        this.loadPendingRequests();\n      },\n      error: (error) => {\n        console.error('Error accepting request:', error);\n        alert('Error accepting friend request');\n      }\n    });\n  }\n\n  rejectRequest(friendshipId: number): void {\n    this.friendshipService.rejectFriendRequest(friendshipId).subscribe({\n      next: () => {\n        this.loadPendingRequests();\n      },\n      error: (error) => {\n        console.error('Error rejecting request:', error);\n        alert('Error rejecting friend request');\n      }\n    });\n  }\n\n  openChat(friendId: number): void {\n    this.router.navigate(['/chat', friendId]);\n  }\n\n  logout(): void {\n    this.authService.logout();\n  }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}